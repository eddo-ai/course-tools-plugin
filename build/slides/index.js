(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,s=window.wp.components,l=window.ReactJSXRuntime,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"eddolearning/slides","title":"Eddo Learning Course Slides","category":"widgets","icon":"slides","description":"A block for embedding Eddo Learning course presentation slides. Supports Google Slides.","example":{},"supports":{"html":false},"textdomain":"eddolearning","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","attributes":{"slidesSrc":{"type":"string","default":""},"startSlide":{"type":"string","default":"1"}}}');(0,e.registerBlockType)(i.name,{...i,edit:function({attributes:e,setAttributes:i}){const{slidesSrc:o,startSlide:n}=e,r=(0,t.useBlockProps)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.InspectorControls,{children:(0,l.jsxs)(s.PanelBody,{title:"Slides Settings",children:[(0,l.jsx)(s.TextControl,{label:"Slides Source URL",value:o,onChange:e=>i({slidesSrc:e}),help:"For Google Slides, paste the presentation URL"}),(0,l.jsx)(s.TextControl,{label:"Starting Slide",value:n,onChange:e=>{(e=>/^[1-9]\d*$/.test(e)||/^[A-Z]{1,2}$/i.test(e))(e)&&i({startSlide:e.toUpperCase()})},help:"Enter a number (1, 2, ...) or letter (A, B, AA, ...)"})]})}),(0,l.jsx)("div",{...r,children:o?(0,l.jsx)("iframe",{src:(()=>{if(!o)return"";let e=o;if(e.includes("docs.google.com/presentation")){const t=e.match(/\/d\/([a-zA-Z0-9-_]+)/);t&&t[1]&&(e=`https://docs.google.com/presentation/d/${t[1]}/embed`);const s=e.includes("?")?"&":"?";e=`${e}${s}start=false&loop=false&delayms=3000`,"1"!==n&&(e+=`&slide=${n}`)}else{const t=e.includes("?")?"&":"?";e=`${e}${t}start=${encodeURIComponent(n)}`}return e})(),width:"100%",height:"600",frameBorder:"0",allowFullScreen:"true",mozallowfullscreen:"true",webkitallowfullscreen:"true",title:"Presentation Slides"}):(0,l.jsx)("p",{children:"Please enter a slides URL in the block settings."})})]})},save:function({attributes:e}){const{slidesSrc:s,startSlide:i}=e,o=t.useBlockProps.save();if(!s)return null;let n=s;if(n.includes("docs.google.com/presentation")){const e=n.match(/\/d\/([a-zA-Z0-9-_]+)/);e&&e[1]&&(n=`https://docs.google.com/presentation/d/${e[1]}/embed?start=false&loop=false&delayms=3000`,"1"!==i&&(n+=`&slide=${i}`))}return(0,l.jsx)("div",{...o,children:(0,l.jsx)("iframe",{src:n,width:"100%",height:"600",frameBorder:"0",allowFullScreen:!0,title:"Presentation Slides"})})}})})();